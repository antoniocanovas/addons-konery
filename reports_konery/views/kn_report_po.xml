<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <template id="konery_po_report_document">
            <t t-name="konery_po_report_document">
                <t t-call="reports_konery.external_konery_so_layout">
                    <t t-set="o" t-value="o.with_context(lang=o.partner_id.lang)"/>
                    <div class="col-3 mb4">
                        <img t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" style="max-height: 45px;" alt="Logo"/>
                    </div>
                    <div style="flex;font-weight: 400;font-family: Campton;font-size:16px">
                        <div style="float:left;white-space: nowrap;line-height: 17px; width:35%;">
                            <br/>
                            <br/>
                            <strong>
                                <h3 t-if="o.state == 'draft'">SOLICITUD DE PRESUPUESTO</h3>
                                <h3 t-if="o.state in ['sent', 'to approve']">PEDIDO DE COMPRA</h3>
                                <h3 t-if="o.state in ['purchase', 'done']">Confirmación Pedido de Compra </h3>
                                <h3 t-if="o.state == 'cancel'">PEDIDO DE COMPRA CANCELADO</h3>
                            </strong> <br/>
                            <p style="text-align:left;line-height: 6px;font-size:18px"><strong>Enviar a:</strong></p>
                            <p t-if="not o.dest_address_id" style="text-align:left;color:#0084BF;white-space: nowrap;font-size:16px;line-height: 18px;">
                                <strong><span t-field="o.company_id"/></strong><br/>
                                <span t-field="o.company_id.street"/><br/>
                                <span t-field="o.company_id.street2"/><br/>
                                <span t-field="o.company_id.zip"/> <span t-field="o.company_id.state_id"/><br/>
                                <span t-field="o.company_id.country_id"/><br/>
                                NIF:<span t-field="o.company_id.vat"/>
                            </p>
                            <p t-if="o.dest_address_id" style="text-align:left;color:#0084BF;white-space: nowrap;font-size:16px;line-height: 18px;">
                                <strong><span t-field="o.dest_address_id"/></strong><br/>
                                <span t-field="o.dest_address_id.street"/>, <span t-field="o.dest_address_id.city"/><br/>
                                <span t-field="o.dest_address_id.zip"/> <span t-field="o.dest_address_id.state_id"/><br/>
                                <span t-field="o.dest_address_id.country_id"/><br/>
                                NIF:<span t-field="o.dest_address_id.vat"/>
                            </p>

                            <div>
                                <p style="text-align:left;color:#0084BF;line-height: 18px;">
                                    www.konery.com<br/>
                                    info@konery.com<br/>
                                    +34 868 07 44 04 <br/>
                                </p>

                            </div>

                        </div>
                        <div style="float:right;">
                            <div style="text-align:left;white-space: nowrap;font-size:16px;line-height: 18px;">
                                <strong><span t-field="o.partner_id"/></strong><br/>
                                <span t-field="o.partner_id.street"/><br/>
                                <span t-field="o.partner_id.zip"/> <span t-field="o.partner_id.state_id"/><br/>
                                <span t-field="o.partner_id.country_id"/><br/>
                                NIF:<span t-field="o.partner_id.vat"/><br/>
                            </div>
                            <!--<div>
                                 <br/>
                                 NIF:<span t-field="o.company_id.vat"/><br/>
                             </div>-->
                            <br/>
                            <div>
                                <p style="text-align:left;line-height: 18px;font-size:14px">REF.INTERNA PEDIDO:
                                    <strong><span t-field="o.name" class="m-0"/></strong><br/>
                                    SU REF. PEDIDO:<strong><span t-field="o.partner_ref" class="m-0"/></strong><br/>
                                    FECHA PEDIDO:<strong><span t-field="o.date_order" class="m-0"/></strong></p>
                            </div>
                            <br/>

                        </div>
                    </div>




                    <div class="page">
                        <div class="oe_structure"/>
                        <div class="oe_structure"/>

                        <!--<t t-set="display_discount" t-value="any([l.discount for l in o.order_line])"/>-->
                        <table class="table-border" style="width:100%;padding-top: 10px;font-family: Campton; padding-bottom:10px;font-family: Campton;border-color:white;">
                            <!-- <thead>
                                 <tr style="border-bottom:1pt solid #0084BF;border-top:1pt solid #0871d0;">
                                     <th><strong>DESCRIPCIÓN </strong></th>

                                     <th/>
                                     <th><strong>IMPUESTOS</strong></th>
                                     <th/>
                                     <th class="text-center"><span>/</span></th>
                                     <th class="text-center"><strong>FECHA PEDIDO</strong></th>
                                     <th/>
                                     <th class="text-right"><strong>CANTIDAD</strong></th>

                                     <th class="text-center"><span>/</span></th>
                                     <th class="text-right"><strong>PRECIO UND</strong></th>

                                     <th class="text-center"><span>/</span></th>

                                     <th class="text-right"><strong>TOTAL</strong></th>
                                 </tr>
                             </thead>-->
                            <thead>
                                <tr style="border-bottom:1pt solid #0084BF;border-top:1pt solid #0871d0;">
                                    <!-- TODO: remove in master -->
                                    <t t-set="colspan" t-value="11"/>
                                    <th style="padding-top: 10px; padding-bottom:10px;font-weight: 600;font-size:20px" class="text-left"><span><strong>ITEM / DESCRIPTION</strong></span></th>

                                    <!--<th class="d-none text-left"><span>Source Document</span></th>-->
                                    <th class="text-center"><span>CANTIDAD</span></th>
                                    <th class="text-center"><span>/</span></th>
                                    <th t-attf-class="text-center"><span>PRECIO UNITARIO</span></th>
                                    <th class="text-center"><span>/</span></th>
                                    <!--<th t-if="display_discount" t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                                        <span>Disc.(%)</span>

                                        <t t-set="colspan" t-value="colspan+1"/>
                                    </th>-->
                                    <!--<th t-if="display_discount" class="text-center"><strong>Desc. (%)</strong></th>
                                    <th t-if="display_discount" class="text-center"><span>/</span></th>-->
                                    <th t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span>IMPUESTOS</span></th>
                                    <th class="text-center"><span>/</span></th>
                                    <th class="text-center">
                                        <span groups="account.group_show_line_subtotals_tax_excluded">TOTAL</span>
                                        <span groups="account.group_show_line_subtotals_tax_included">Total Price</span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody style="border-bottom:1pt solid #0084BF;border-top:1pt solid #0871d0;">
                                <tr t-foreach="o.order_line" t-as="line">

                                    <td>
                                        <p style="text-align:left;color:#0084BF"><span t-field="line.sequence"/> /  <span t-field="line.name"/></p>
                                    </td>



                                    <td class="text-center">
                                        <span t-field="line.product_qty"/>
                                        <span t-field="line.product_uom.name" groups="uom.group_uom"/>
                                    </td>

                                    <td/>
                                    <!--<td colspan="2" class="text-center">
                                        <span t-field="line.date_planned"/>
                                    </td>-->
                                    <td class="text-center">
                                        <span t-field="line.price_unit"/>
                                    </td>

                                    <td/>

                                    <!--<td t-if="display_discount" class="text-center">
                                        <span t-field="line.discount"/>
                                    </td>
                                    <td t-if="display_discount"/>-->

                                    <td class="text-center">
                                        <span t-esc="', '.join(map(lambda x: x.name, line.taxes_id))"/>
                                    </td>

                                    <td/>

                                    <td class="text-right">
                                        <span t-field="line.price_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <br/>

                        <div id="total" class="row justify-content-end">
                            <div class="col-4">
                                <table class="table table-sm">
                                    <tr class="border-black">
                                        <td><strong>Subtotal</strong></td>
                                        <td class="text-right">
                                            <span t-field="o.amount_untaxed" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Impuestos</td>
                                        <td class="text-right">
                                            <span t-field="o.amount_tax" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                        </td>
                                    </tr>
                                    <tr class="border-black o_total">
                                        <td><strong>Total</strong></td>
                                        <td class="text-right">
                                            <span t-field="o.amount_total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: o.currency_id}"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <p t-field="o.notes"/>
                        <div class="oe_structure"/>
                    </div>
                    <p style="page-break-before:always;text-align: justify">
                        <strong>PROTECCIÓN DE DATOS: Responsable del Tratamiento: </strong> KONERY EFICIENCIA ENERGÉTICA S.L.
                        B73704405  <strong>Finalidad del Tratamiento: </strong>Mantener de la relación comercial, gestión contable y económica derivada de la misma.
                        <strong> Procedencia de los datos:</strong> Los datos han sido facilitados por usted mismo o por su organización. <strong> Categoría de datos:</strong>
                        Tratamos únicamente datos identificativos para mantener el contacto y datos económicos. <strong> Ejercicio de derechos:</strong>
                        Podrá acceder, corregir, eliminar y portar sus datos personales, así como oponerse y solicitar la limitación de los mismos.
                        Puede ejercitar sus derechos, así como obtener más información en Calle José Manuel Sánchez Pedreño 1 -
                        Edificio Plazarte - planta 7, 30009, Murcia, MURCIA,o en la dirección de correo electrónico dpokonery@konery.com.
                    </p>
                </t>
            </t>
        </template>

    </data>
</odoo>
